os: linux
dist: xenial
#sudo: required

language: python

addons:
  apt:
    packages:
    - gfortran
    - libffi-dev
    - libssl-dev
    - python-lzma
    - python3

cache:
  - timeout: 1000

notifications:
  email:
    on_success: change
    on_failure: always

after_success:
  - conda install codecov
  - codecov

jobs:
  include:
  - python: 2.7
    env: TEST_PROFILE="proteus-hashdist"
    install: ./install-hashdist.sh
    script: ./test.sh
  - python: 3.7
    env: TEST_PROFILE="proteus-conda"
    install: ./install-conda.sh
    script: ./test.sh
